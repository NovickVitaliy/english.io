@using Blazored.LocalStorage
@using MudBlazor
@using Shared.Components
@inject ILocalStorageService LocalStorageService
@inherits BaseLayout

@code {
    private void HandleThemeChange(bool value)
    {
        IsDarkMode = value;
    }
}

<MudThemeProvider IsDarkMode="IsDarkMode" Theme="Theme"/>
<MudPopoverProvider/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout Style="height: 100vh; overflow: hidden;">
    <MudMainContent Class="pa-0 d-flex flex-column"
                    style=@($"height: 100vh; background-color: {(IsDarkMode ? Theme.PaletteDark.BackgroundGray : Theme.PaletteLight.BackgroundGray)}")>
        <CascadingValue Value="Theme">
            <CascadingValue Value="IsDarkMode">
                <DashboardHeader OnThemeChange="HandleThemeChange" IsDarkMode="IsDarkMode"></DashboardHeader>

                <div class="flex-grow-1 overflow-auto">
                    @Body
                </div>

                <MudPaper Elevation="2" Class="flex-shrink-0" Style="height: 56px">
                    <MudText Align="Align.Center">Made by Novik Vitalii</MudText>
                </MudPaper>
            </CascadingValue>
        </CascadingValue>
    </MudMainContent>
</MudLayout>
